{% extends '../layout/base.html' %}
{% load static %}

{% block style %}
<style></style>
{% endblock style %}

{% block content %}
<h1 class="m-3">QnA</h1>

<div class="container my-1">
    <table class="table">
        <thead>
            <tr class="table-dark">
                <th>ë²ˆí˜¸</th>
                <th>ì œëª©</th>
                <th>ì‘ì„±ì</th>
                <th>ì‘ì„±ì¼ì‹œ</th>
            </tr>
        </thead>
        <tbody>
            {% for question in page_obj %}
            <tr>
              <td>{{ question.id }}</td>
              <td>
                <a href="{% url 'qna:question_detail' question_id=question.id %}">{{ question.subject }}</a>
                <!-- ì—¬ê¸°ì¯¤.... ë‹µë³€ ê°œìˆ˜ ì¶œë ¥. 0ì¼ë•ŒëŠ” ì•ˆë³´ì—¬ì¤˜ë„ ë¨ğŸ‘-->
                {% if question.answer_set.count > 0 %}
                  <span class="badge text-bg-info">{{ question.answer_set.count }}</span>
                {% endif %}
              </td>
              <td>{{ question.author | default:'' }}</td>
              <td>{{ question.created_at }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4">ì‘ì„±ëœ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
      <!-- ì´ì „í˜ì´ì§€ ì˜ì—­ ì‹œì‘ -->
      {% if page_obj.has_previous %}
          <li class="page-item">
              <a class="page-link" href="{% url 'qna:index' %}?page={{ page_obj.previous_page_number }}">Previous</a>
          </li>
      {% else %}
          <li class="page-item disabled">
              <a class="page-link">Previous</a>
          </li>
      {% endif %}
      <!-- ì´ì „í˜ì´ì§€ ì˜ì—­ ë -->
  
      <!-- í˜ì´ì§€ë„˜ë²„ ì˜ì—­ ì‹œì‘ -->
      {% for page_number in page_obj.paginator.page_range %}
          {# í˜„ì¬í˜ì´ì§€ ê¸°ì¤€ ì•ë’¤ 3ê°œê¹Œì§€ë§Œ í‘œì‹œ (4 ~ 7 ë§í¬ í‘œì‹œ) #}
          {% if page_number >= page_obj.number|add:-3 and page_number <= page_obj.number|add:3 %}
              {% if page_number == page_obj.number %}
                  {# í˜„ì¬í˜ì´ì§€ì¸ ê²½ìš° #}
                  <li class="page-item active"><a class="page-link" href="#">{{ page_number }}</a></li>
              {% else %}
                  {# í˜„ì¬í˜ì´ì§€ê°€ ì•„ë‹Œ ê²½ìš° #}
                  <li class="page-item">
                      <a class="page-link" href="{% url 'qna:index' %}?page={{ page_number }}">{{ page_number }}</a>
                  </li>        
              {% endif %} 
          {% endif %}
          
      {% endfor %}
      <!-- í˜ì´ì§€ë„˜ë²„ ì˜ì—­ ë -->

      <!-- ë‹¤ìŒí˜ì´ì§€ ì˜ì—­ ì‹œì‘ -->
      {% if page_obj.has_next %}
          <li class="page-item">
              <a class="page-link" href="{% url 'qna:index' %}?page={{ page_obj.next_page_number }}">Next</a>
          </li>
      {% else %}
          <li class="page-item disabled">
              <a class="page-link" href="#">Next</a>
          </li>
      {% endif %}
      <!-- ë‹¤ìŒí˜ì´ì§€ ì˜ì—­ ë -->
  </ul>
</nav>
<!-- í˜ì´ì§• ì²˜ë¦¬ ë -->

<a href="{% url 'qna:question_create' %}" class="btn btn-primary">ì§ˆë¬¸ ë“±ë¡í•˜ê¸°</a>

{% endblock content %}

{% block script %}
<script>
  console.log('í˜ì´ì§€ë‚´ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì¤‘...');
</script>
{% endblock script %}